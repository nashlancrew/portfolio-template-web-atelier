<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>404 | Fuera del Lienzo</title>

    <!-- Bootstrap 5 -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <!-- Fuentes -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500&family=Syne:wght@400;700;800&display=swap"
      rel="stylesheet"
    />

    <!-- Iconos -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- CSS Global -->
    <link rel="stylesheet" href="assets/css/style.css" />

    <style>
      /* --- ESTILOS GENERALES 404 --- */
      body {
        min-height: 100vh;
        width: 100%;
        margin: 0;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        overflow-x: hidden;
        text-align: center;
        padding: 2rem;
        background-color: var(--bg-color);
        color: var(--text-main);
        background-image: radial-gradient(
          var(--dot-color) 1px,
          transparent 1px
        );
        background-size: 30px 30px;
      }

      /* --- CANVAS --- */
      #drawing-canvas {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 1;
        pointer-events: auto;
      }

      /* --- CONTENEDOR ERROR --- */
      .error-container {
        z-index: 10;
        position: relative;
        pointer-events: none;
        width: 100%;
        max-width: 800px;
      }

      .error-content-wrapper {
        pointer-events: auto;
        position: relative;
      }

      .error-code {
        font-family: "Syne", sans-serif;
        font-size: clamp(6rem, 25vw, 15rem);
        line-height: 0.8;
        font-weight: 800;
        margin-bottom: 0;
        color: #ff595e;
        mix-blend-mode: multiply;
      }

      .error-msg {
        font-family: "Syne", sans-serif;
        font-size: clamp(1.2rem, 4vw, 2rem);
        margin-top: 1rem;
        margin-bottom: 3rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        color: var(--text-main);
      }

      /* --- BOTÓN HOME --- */
      .btn-home {
        background: var(--text-main);
        color: var(--bg-color);
        padding: 15px 40px;
        border-radius: 50px;
        font-family: "Syne", sans-serif;
        font-weight: 700;
        text-decoration: none;
        transition: transform 0.3s ease;
        display: inline-block;
        border: 2px solid var(--text-main);
        cursor: none;
        white-space: nowrap;
      }

      .btn-home:hover {
        transform: scale(1.05);
        background: transparent;
        color: var(--text-main);
      }

      /* --- STICKER 404 --- */
      .error-heading {
        position: relative;
        display: inline-block;
      }
      .sticker-404 {
        position: absolute;
        top: 65%;
        right: -10%;
        width: clamp(140px, 20vw, 220px);
        aspect-ratio: 450/420;
        z-index: 4;
        pointer-events: none;
        animation: float-404 4s ease-in-out infinite;
      }
      .sticker-404-base {
        display: block;
        width: 100%;
        height: auto;
      }
      .sticker-404-wheel {
        position: absolute;
        top: 3.5%;
        right: 31%;
        width: 20%;
        height: auto;
        transform-origin: 50% 50%;
        animation: spin-wheel 6s linear infinite;
      }
      @keyframes spin-wheel {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }
      @keyframes float-404 {
        0%,
        100% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-20px);
        }
      }

      .error-code,
      .error-msg,
      .btn-home {
        position: relative;
        z-index: 2;
      }

      /* --- WIDGET IDIOMA (DESPLIEGUE HORIZONTAL) --- */
      #lang-widget {
        position: fixed;
        bottom: 20px;
        left: 30px;
        z-index: 1001;
        display: flex;
        flex-direction: row; /* Alineación horizontal */
        align-items: center;
        gap: 15px;
      }

      /* Botón Principal */
      #lang-toggle-btn {
        background: #1a1a1a;
        color: #fdfbf6;
        border: 1px solid #1a1a1a;
        width: 50px;
        height: 50px;
        border-radius: 50%;
        font-family: "Syne", sans-serif;
        font-weight: 700;
        cursor: none;
        transition: all 0.3s ease;
        text-transform: uppercase;
        font-size: 0.9rem;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      }

      #lang-toggle-btn:hover {
        transform: scale(1.1);
      }

      /* Menú Desplegable Horizontal */
      #lang-menu {
        display: flex;
        flex-direction: row; /* Opciones en fila */
        gap: 10px;
        opacity: 0;
        pointer-events: none;
        transform: translateX(-20px); /* Animación desde la izquierda */
        transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      }

      #lang-widget.active #lang-menu {
        opacity: 1;
        pointer-events: auto;
        transform: translateX(0);
      }

      #lang-widget.active #lang-toggle-btn {
        background: #fdfbf6;
        color: #1a1a1a;
        transform: rotate(90deg); /* Rotación para apertura lateral */
      }


      .lang-option {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: #fdfbf6;
        color: #1a1a1a;
        border: 1px solid #1a1a1a;
        font-family: "Inter", sans-serif;
        font-weight: 600;
        font-size: 0.75rem;
        cursor: none;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease;
        text-transform: uppercase;
      }

      .lang-option:hover {
        background: #1a1a1a;
        color: #fdfbf6;
        transform: scale(1.1);
      }

      .lang-option.selected {
        background: #1a1a1a;
        color: #fdfbf6;
      }

      @media (max-width: 767px) {
        #lang-widget {
          bottom: 20px;
          left: 20px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Cursor -->
    <div id="cursor"></div>

    <!-- Canvas -->
    <canvas id="drawing-canvas"></canvas>

    <!-- Contenido -->
    <div class="error-container">
      <div class="error-content-wrapper">
        <div class="error-heading">
          <h1 class="error-code hover-trigger">404</h1>
          <div class="sticker-404" aria-hidden="true">
            <img
              src="assets/images/sticker%20404%20base.png"
              alt=""
              class="sticker-404-base"
            />
            <img
              src="assets/images/sticker-404-animation.png"
              alt=""
              class="sticker-404-wheel"
            />
          </div>
        </div>
        <!-- Texto Traducible -->
        <p class="error-msg" data-lang="error-msg">Te has salido del lienzo</p>

        <!-- Botón Traducible -->
        <a
          href="index.html"
          class="btn-home hover-trigger"
          data-lang="btn-home"
        >
          <i class="fa-solid fa-arrow-left me-2"></i> VOLVER AL ESTUDIO
        </a>
      </div>
    </div>

    <!-- WIDGET DE IDIOMA (Drop-RIGHT) -->
    <div id="lang-widget">
      <!-- Botón Principal (Primero) -->
      <button
        id="lang-toggle-btn"
        class="hover-trigger"
        onclick="toggleLangMenu()"
      >
        <i class="fa-solid fa-globe"></i>
      </button>

      <!-- Menú Oculto (Segundo, sale a la derecha) -->
      <div id="lang-menu">
        <button
          class="lang-option hover-trigger selected"
          onclick="setLanguage404('es')"
        >
          ES
        </button>
        <button
          class="lang-option hover-trigger"
          onclick="setLanguage404('en')"
        >
          EN
        </button>
        <button
          class="lang-option hover-trigger"
          onclick="setLanguage404('nl')"
        >
          NL
        </button>
      </div>
    </div>

    <script>
      // --- 1. LÓGICA DE IDIOMA ---
      const translations404 = {
        es: {
          "error-msg": "Te has salido del lienzo",
          "btn-home":
            "<i class='fa-solid fa-arrow-left me-2'></i> VOLVER AL ESTUDIO",
        },
        en: {
          "error-msg": "You've gone off the canvas",
          "btn-home":
            "<i class='fa-solid fa-arrow-left me-2'></i> BACK TO STUDIO",
        },
        nl: {
          "error-msg": "Je bent buiten het canvas getreden",
          "btn-home":
            "<i class='fa-solid fa-arrow-left me-2'></i> TERUG NAAR STUDIO",
        },
      };

      let currentLang404 = "es";

      function toggleLangMenu() {
        document.getElementById("lang-widget").classList.toggle("active");
      }

      function setLanguage404(lang) {
        currentLang404 = lang;

        document.querySelectorAll(".lang-option").forEach((btn) => {
          btn.classList.remove("selected");
          if (btn.innerText.toLowerCase() === lang)
            btn.classList.add("selected");
        });

        document.querySelectorAll("[data-lang]").forEach((el) => {
          const key = el.getAttribute("data-lang");
          if (translations404[currentLang404][key]) {
            el.innerHTML = translations404[currentLang404][key];
          }
        });

        toggleLangMenu();
      }

      try {
        if (localStorage.getItem("dark-mode-enabled") === "true") {
          document.body.classList.add("dark-mode");
        }
      } catch (error) {
        // Ignore storage errors
      }

      // --- 2. CURSOR ---
      const cursor = document.getElementById("cursor");

      document.addEventListener("mousemove", (e) => {
        cursor.style.left = e.clientX + "px";
        cursor.style.top = e.clientY + "px";
      });

      document.querySelectorAll(".hover-trigger").forEach((el) => {
        el.addEventListener("mouseenter", () =>
          cursor.classList.add("hovered")
        );
        el.addEventListener("mouseleave", () =>
          cursor.classList.remove("hovered")
        );
      });

      // --- 3. CANVAS ---
      const canvas = document.getElementById("drawing-canvas");
      const ctx = canvas.getContext("2d");
      let isDrawing = false;
      let lastX = 0,
        lastY = 0;
      let strokeColor = "#1A1A1A";

      function resizeCanvas() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        ctx.lineCap = "round";
        ctx.lineJoin = "round";
        ctx.lineWidth = 3;
        ctx.strokeStyle = strokeColor;
      }

      window.addEventListener("resize", resizeCanvas);
      resizeCanvas();

      function draw(e) {
        if (!isDrawing) return;
        const x = e.type.includes("touch") ? e.touches[0].clientX : e.clientX;
        const y = e.type.includes("touch") ? e.touches[0].clientY : e.clientY;
        ctx.beginPath();
        ctx.moveTo(lastX, lastY);
        ctx.lineTo(x, y);
        ctx.stroke();
        [lastX, lastY] = [x, y];
      }

      canvas.addEventListener("mousedown", (e) => {
        isDrawing = true;
        [lastX, lastY] = [e.clientX, e.clientY];
        cursor.classList.add("drawing");
      });

      window.addEventListener("mouseup", () => {
        isDrawing = false;
        cursor.classList.remove("drawing");
      });

      canvas.addEventListener("mousemove", draw);

      // Touch
      canvas.addEventListener(
        "touchstart",
        (e) => {
          isDrawing = true;
          const t = e.touches[0];
          [lastX, lastY] = [t.clientX, t.clientY];
        },
        { passive: false }
      );
      canvas.addEventListener(
        "touchmove",
        (e) => {
          if (isDrawing) e.preventDefault();
          draw(e);
        },
        { passive: false }
      );
      canvas.addEventListener("touchend", () => (isDrawing = false));

      function setColor(color) {
        strokeColor = color;
        ctx.strokeStyle = color;
      }
      function clearCanvas() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
      }
    </script>
  </body>
</html>
